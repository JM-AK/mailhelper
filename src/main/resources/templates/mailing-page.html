<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<html xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8"/>

    <title>Рассылка</title>

    <link rel="icon" type="image/png" th:href="@{/favicon.ico}"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js"
            integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"
            integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG"
            crossorigin="anonymous"></script>
    <meta name="ctx" th:content="${#httpServletRequest.getContextPath()}"/>

</head>
<body>

<div th:replace="~{navigation :: navi(Mailing)}"/>

<div class="container">

    <div th:if="${mailingList.isEmpty()}">
        <span>Список рассылки пуст</span>
    </div>

    <div th:unless="${mailingList.isEmpty()}">
        <table class="table caption-top table-striped">
            <caption>Список рассылки</caption>
            <thead class="thead-light">
            <tr>
                <th>все</th>
                <th>ID</th>
                <th>ДЗО</th>
                <th></th>
                <th>Вложения</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="m : ${mailingList}">

                <td th:text="вкл">вкл</td>
                <td th:text="${m.getId()}">2</td>
                <td th:text="${m.getCompany().getShortName()}">company_2</td>
                <td>path to attachement</td>

                <td colspan="3">
                    <table class="table mb-0">
                        <tbody>
                        <tr th:each="entry : ${m.getMsgAddressMap().entrySet()}">
                            <td th:text="${entry.getValue()}"></td>
                            <td th:text="${entry.getKey().getEmail()}"></td>
                            <td th:text="${entry.getKey().getLastName()}"></td>
                        </tr>
                        </tbody>
                    </table>

                </td>
            </tr>

            </tbody>

        </table>

    </div>
</div>

</body>
</html>